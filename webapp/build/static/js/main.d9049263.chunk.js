(this["webpackJsonpspotify-wrapped"]=this["webpackJsonpspotify-wrapped"]||[]).push([[0],{38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},59:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var s,c=a(1),i=a.n(c),r=a(27),n=a.n(r),l=(a(38),a(3)),o=(a(39),a(40),a(28)),j=a.n(o),d=a(29),b=a.n(d),u=a(4),m=(a(59),a(0)),O=function(e){var t={};return e.isSelected&&(t.backgroundColor="#306b30"),Object(m.jsx)("div",{onClick:e.onClick,style:t,className:"button",children:Object(m.jsxs)("span",{children:["top ",e.category]})})},p=(a(61),function(e){var t={};return e.isSelected&&(t.backgroundColor="rgba(89, 89, 89, 1)"),Object(m.jsx)("div",{onClick:e.onClick,className:"term-button",style:t,children:Object(m.jsx)("span",{name:"term",children:e.termdesc})})}),h=(a(62),a(33)),x=function(e){var t={};return e.isVisible?t.display="block":t.display="none",Object(m.jsx)("div",{style:t,children:Object(m.jsx)("div",{className:"save-button",id:e.id,onClick:e.onClick,visible:e.isVisible,children:Object(m.jsxs)("span",{children:[Object(m.jsx)(h.a,{})," download collage"]})})})},v=(a(63),function(e){return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"show-all-button",onClick:e.onClick,visible:e.isVisible,children:Object(m.jsx)("span",{children:e.show})})})}),g=a(12),f=a.n(g),y=(a(65),function(e){var t={background:"url(".concat(e.backgroundUrl,")")},a={};return e.isCardVisible?t.display="block":t.display="none",e.areCardsVisible?a.display="block":a.display="none",Object(m.jsx)("div",{style:a,children:Object(m.jsx)("a",{className:"card-link",href:e.link,target:"_blank",rel:"noreferrer",children:Object(m.jsxs)("div",{className:"card-ranking",style:t,children:[Object(m.jsx)("span",{children:e.text}),Object(m.jsx)("div",{className:"card-subtext",children:Object(m.jsx)("span",{children:e.subtext})})]})})})}),k=(a(66),function(e){var t={};return e.isVisible?t.display="block":t.display="none",Object(m.jsx)("div",{style:t,children:Object(m.jsxs)("div",{className:"popularity-content",children:[Object(m.jsxs)("div",{className:"popularity-element",children:[Object(m.jsx)("div",{className:"popularity-emoji",children:e.popularityEmoji}),Object(m.jsxs)("div",{className:"average-popularity",children:[e.averagePopularity,"/10"]}),Object(m.jsx)("div",{className:"description",children:"popularity"})]}),Object(m.jsxs)("div",{className:"popularity-element",children:[Object(m.jsxs)("div",{children:[" ",e.leastMainstreamEmoji," "]}),Object(m.jsx)("a",{className:"popularity-link",href:e.link,target:"_blank",rel:"noreferrer",children:Object(m.jsx)("div",{className:"name",children:e.name})}),Object(m.jsx)("div",{className:"description",children:"least mainstream"})]})]})})}),_=(a(67),function(){return["\u270c\ud83d\ude17","\ud83d\ude24\ud83d\udde3\ud83d\udcaf","\ud83d\udc41\ufe0f\ud83d\udc44\ud83d\udc41\ufe0f","\ud83e\udd94\ud83d\udc3e","\ud83e\udd18\ud83d\ude0e"][Math.round(4*Math.random())]}),N=function(){var e=Object(c.useState)(_),t=Object(l.a)(e,1)[0];return Object(m.jsx)("span",{style:{"white-space":"nowrap"},children:t})},S=function(e){return Object(m.jsx)("div",{className:"headline",children:Object(m.jsxs)("h1",{children:[Object(m.jsx)("span",{className:"username",children:e.username})," Mini Wrap ",Object(m.jsx)(N,{})]})})},w=(a(68),function(e){return Object(m.jsxs)("div",{className:"audio-feature",children:[Object(m.jsx)("div",{className:"audio-feature-emoji",children:e.emoji}),Object(m.jsxs)("div",{children:[e.score,e.scale]}),Object(m.jsx)("div",{className:"audio-feature-category",children:e.category})]})}),C=(a(69),function(){var e=new Date,t=String(e.getDate()).padStart(2,"0");return String(e.getMonth()+1).padStart(2,"0")+"/"+t+"/"+e.getFullYear()}),V=function(){var e=Object(c.useState)(C),t=Object(l.a)(e,1)[0];return Object(m.jsx)("span",{style:{float:"right",paddingTop:"3px"},children:t})},M=function(e){var t={};e.isVisible?t.display="block":t.display="none";var a=e.category,s=e.term;return Object(m.jsxs)("div",{className:"gallery",id:e.id,style:t,children:[Object(m.jsxs)("div",{className:"collage-headline",children:["my top ",a," ",s]}),i.a.Children.toArray(e.images.map((function(e){return Object(m.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:Object(m.jsxs)("span",{className:"gallery-container",children:[Object(m.jsx)("img",{src:e.thumbnail,alt:e.tags[0].value,width:180,height:180}),Object(m.jsx)("div",{className:"gallery-text",children:e.tags[0].value})]})})}))),Object(m.jsxs)("div",{className:"collage-subtext",children:[Object(m.jsx)("span",{className:"website-name",children:"https://wrapped.mudi.me/"}),Object(m.jsx)(V,{})]})]})},E=Object(u.g)((function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(""),n=Object(l.a)(r,2),o=n[0],d=n[1],h=Object(c.useState)(""),g=Object(l.a)(h,2),_=g[0],N=g[1],C=Object(c.useState)(""),V=Object(l.a)(C,2),E=V[0],F=V[1],U=Object(c.useState)(""),A=Object(l.a)(U,2),P=A[0],L=A[1],T=Object(c.useState)(""),z=Object(l.a)(T,2),D=z[0],I=z[1],R=Object(c.useState)(""),B=Object(l.a)(R,2),J=B[0],W=B[1],q=Object(c.useState)("top tracks"),X=Object(l.a)(q,2),Y=X[0],G=X[1],H=Object(c.useState)("medium_term"),K=Object(l.a)(H,2),Q=K[0],Z=K[1],$=Object(c.useState)("medium_term"),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],se=Object(c.useState)("this year"),ce=Object(l.a)(se,2),ie=ce[0],re=ce[1],ne=Object(c.useState)(!1),le=Object(l.a)(ne,2),oe=le[0],je=le[1],de=Object(c.useState)(!1),be=Object(l.a)(de,2),ue=be[0],me=be[1],Oe=Object(c.useState)("show all"),pe=Object(l.a)(Oe,2),he=pe[0],xe=pe[1],ve=Object(c.useState)(!0),ge=Object(l.a)(ve,2),fe=ge[0],ye=ge[1],ke=Object(c.useState)([]),_e=Object(l.a)(ke,2),Ne=_e[0],Se=_e[1],we=Object(c.useState)([]),Ce=Object(l.a)(we,2),Ve=Ce[0],Me=Ce[1],Ee=Object(c.useState)(["my"]),Fe=Object(l.a)(Ee,2),Ue=Fe[0],Ae=Fe[1],Pe=Object(c.useState)([]),Le=Object(l.a)(Pe,2),Te=Le[0],ze=Le[1],De=Object(c.useState)([]),Ie=Object(l.a)(De,2),Re=Ie[0],Be=Ie[1],Je=Object(c.useState)([]),We=Object(l.a)(Je,2),qe=We[0],Xe=We[1],Ye=Object(c.useState)([]),Ge=Object(l.a)(Ye,2),He=Ge[0],Ke=Ge[1],Qe=Object(u.f)();Object(c.useEffect)((function(){var e;e="https://api.wrapped.mudi.me",ye(!0);var t=new URLSearchParams(window.location.search).get("access_token");j.a.get("".concat(e,"/api/top/?term=").concat(te,"&spotify_token=").concat(t),{timeout:5e3}).then((function(e){var t=e.data.audio_features,a=e.data.tracks_popularity,c=e.data.artists_popularity;Ae("".concat(e.data.user_data,"'s")),Se(e.data.artists_data),Me(e.data.tracks_data),Xe(e.data.tracks_collage),Ke(e.data.artists_collage),ye(!1),s(t),ze(a),Be(c),Ze(t,a,c),function(){switch(Q){case"short_term":re("this month");break;case"long_term":re("of all time");break;default:re("this year")}}()})).catch((function(e){console.log(e),400===e.response.status&&Qe.push("/")}))}),[Qe,te,Q]);var Ze=function(e,t,a){for(var s=e.danceability,c=e.energy,i=e.tempo,r=e.happiness,n=t.average_popularity,l=a.average_popularity,o=[[[0,1.7],"\ud83e\uddcd\ud83e\uddcd\ud83e\uddcd","\ud83d\udca4\ud83d\udca4\ud83d\udca4","\ud83d\ude2b\ud83d\ude2b\ud83d\ude2b","\ud83d\udc64\ud83d\udc64\ud83d\udc64"],[[1.7,3.3],"\ud83e\uddcd\ud83e\uddcd","\ud83d\udca4\ud83d\udca4","\ud83d\ude2b\ud83d\ude2b","\ud83d\udc64\ud83d\udc64"],[[3.3,5],"\ud83e\uddcd","\ud83d\udca4","\ud83d\ude2b","\ud83d\udc64"],[[5,6.7],"\ud83d\udc83","\u26a1","\ud83d\ude06","\ud83d\udd25"],[[6.7,8.4],"\ud83d\udc83\ud83d\udc83","\u26a1\u26a1","\ud83d\ude06\ud83d\ude06","\ud83d\udd25\ud83d\udd25"],[[8.4,10],"\ud83d\udc83\ud83d\udc83\ud83d\udc83","\u26a1\u26a1\u26a1","\ud83d\ude06\ud83d\ude06\ud83d\ude06","\ud83d\udd25\ud83d\udd25\ud83d\udd25"]],j=[[[0,40],"\ud83d\udc0c\ud83d\udc0c\ud83d\udc0c"],[[40,66],"\ud83d\udc0c\ud83d\udc0c"],[[66,76],"\ud83d\udc0c"],[[76,120],"\ud83d\ude80"],[[120,168],"\ud83d\ude80\ud83d\ude80"],[[168,Number.MAX_VALUE],"\ud83d\ude80\ud83d\ude80\ud83d\ude80"]],b=0;b<6;b++){var u=o[b][0],m=u[0],O=u[1];s>=m&&s<=O&&N(o[b][1]),c>=m&&c<=O&&d(o[b][2]),r>=m&&r<=O&&L(o[b][3]),n>=m&&n<=O&&I(o[b][4]),l>=m&&l<=O&&W(o[b][4])}for(var p=0;p<6;p++){var h=j[p][0],x=h[0],v=h[1];i>=x&&i<=v&&F(j[p][1])}},$e=function(){var e;"top tracks"===Y&&(e="#tracks_img"),"top artists"===Y&&(e="#artists_img"),window.scrollTo(0,0),b()(document.querySelector(e),{useCORS:!0,allowTaint:!0}).then((function(e){var t=document.createElement("a");t.download="artists_collage.png",t.href=e.toDataURL(),document.body.appendChild(t),t.click(),document.body.removeChild(t),t=null}))},et=function(){je(!1),me(!1),xe("show all")},tt=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"audio-feature-texfield",children:[Object(m.jsx)(w,{emoji:_,category:"danceability",score:a.danceability,scale:"/10"}),Object(m.jsx)(w,{emoji:o,category:"energy",score:a.energy,scale:"/10"}),Object(m.jsx)(w,{emoji:E,category:"tempo",score:a.tempo,scale:" bpm"}),Object(m.jsx)(w,{emoji:P,category:"happiness",score:a.happiness,scale:"/10"})]}),Object(m.jsxs)("div",{className:"top-buttons",children:[Object(m.jsx)(O,{onClick:function(){G("top tracks"),je(!1),et()},category:"tracks",isSelected:"top tracks"===Y}),Object(m.jsx)(O,{onClick:function(){G("top artists"),je(!1),et()},category:"artists",isSelected:"top artists"===Y})]}),Object(m.jsxs)("div",{className:"popularity-textfield",children:[Object(m.jsx)(k,{popularityEmoji:J,leastMainstreamEmoji:"\ud83c\udfa7",averagePopularity:Re.average_popularity,name:Re.least_mainstream_artist_name,link:Re.least_mainstream_artist_url,isVisible:"top artists"===Y}),Object(m.jsx)(k,{popularityEmoji:D,leastMainstreamEmoji:"\ud83c\udfa7",averagePopularity:Te.average_popularity,name:Te.least_mainstream_track_name,link:Te.least_mainstream_track_url,isVisible:"top tracks"===Y})]}),Object(m.jsxs)("div",{className:"collage",children:[Object(m.jsx)("div",{style:{overflow:"scroll"},children:Object(m.jsx)(M,{id:"tracks_img",category:"tracks",term:ie,images:qe,isVisible:"top tracks"===Y})}),Object(m.jsx)("div",{style:{overflow:"scroll"},children:Object(m.jsx)(M,{id:"artists_img",category:"artists",term:ie,images:He,isVisible:"top artists"===Y})})]}),Object(m.jsxs)("div",{className:"save-and-share",children:[Object(m.jsx)(x,{onClick:$e,isVisible:"top tracks"===Y}),Object(m.jsx)(x,{onClick:$e,isVisible:"top artists"===Y})]}),Object(m.jsxs)("div",{className:"all-cards",children:[i.a.Children.toArray(Ve.map((function(e){return Object(m.jsx)(y,{areCardsVisible:oe,backgroundUrl:e.track_background,link:e.track_url,text:"".concat(e.track_rank," ").concat(e.track_name),subtext:e.track_artists,isCardVisible:"top tracks"===Y})}))),i.a.Children.toArray(Ne.map((function(e){return Object(m.jsx)(y,{areCardsVisible:oe,backgroundUrl:e.artist_background,link:e.artist_url,text:"".concat(e.artist_rank," ").concat(e.artist_name),subtext:e.artist_followers,isCardVisible:"top artists"===Y})})))]}),Object(m.jsx)(v,{onClick:function(){je(!oe),me(!ue),xe(ue?"show all":"hide all")},show:he+" "+Y})]});return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(f.a,{href:"https://github.com/mudassarzahid/miniwrap"}),Object(m.jsx)("div",{id:"wrapper",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:"built-by",children:["built by ",Object(m.jsx)("a",{href:"https://twitter.com/mudassar_z",target:"_blank",rel:"noreferrer",children:"Mudi"})]}),Object(m.jsx)(S,{username:Ue}),Object(m.jsxs)("div",{className:"term-buttons",children:[Object(m.jsx)(p,{onClick:function(){Z("short_term"),ae("short_term"),je(!1),et()},value:"short_term",termdesc:"4 weeks",isSelected:"short_term"===Q}),Object(m.jsx)(p,{onClick:function(){Z("medium_term"),ae("medium_term"),je(!1),et()},value:"medium_term",termdesc:"6 months",isSelected:"medium_term"===Q}),Object(m.jsx)(p,{onClick:function(){Z("long_term"),ae("long_term"),je(!1),et()},value:"long_term",termdesc:"all time",isSelected:"long_term"===Q})]}),fe&&Object(m.jsxs)("div",{className:"spinner",children:[Object(m.jsx)("div",{className:"rect1"}),Object(m.jsx)("div",{className:"rect2"}),Object(m.jsx)("div",{className:"rect3"}),Object(m.jsx)("div",{className:"rect4"}),Object(m.jsx)("div",{className:"rect5"})]}),!fe&&tt]})})]})})),F=(a(75),a(31)),U=a.n(F);s="https://wrapped.mudi.me";var A=function(){var e=Object(u.f)(),t="".concat(s,"/app");return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f.a,{href:"https://github.com/mudassarzahid/miniwrap"}),Object(m.jsx)("div",{className:"login-headline",children:"Mini Wrap for Spotify"}),Object(m.jsx)("div",{className:"login-sub-headline",children:"\u2728 generate your own collage \u2728"}),Object(m.jsx)("div",{className:"login-button",children:Object(m.jsx)(U.a,{clientId:"0ab0f042b3e44b3086e978dacb7cee47",redirectUri:t,scope:"user-top-read user-read-private user-read-email",onSuccess:function(t){console.log("response: ",t);var a=t.access_token;console.log("access token: ",t.access_token),e.push("/app?access_token=".concat(a))},onFailure:function(t){console.error(t),e.push("/")}})}),Object(m.jsxs)("div",{className:"built-by",children:["built by ",Object(m.jsx)("a",{href:"https://twitter.com/mudassar_z",target:"_blank",rel:"noreferrer",children:"Mudi"})]})]})},P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,77)).then((function(t){var a=t.getCLS,s=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),s(e),c(e),i(e),r(e)}))},L=a(11),T=a(32),z=Object(T.a)();n.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(L.a,{history:z,children:Object(m.jsxs)(u.c,{children:[Object(m.jsx)(u.a,{exact:!0,path:"/",children:Object(m.jsx)(A,{})}),Object(m.jsx)(u.a,{path:"/app",children:Object(m.jsx)(E,{})})]})})}),document.getElementById("root")),P()}},[[76,1,2]]]);
//# sourceMappingURL=main.d9049263.chunk.js.map