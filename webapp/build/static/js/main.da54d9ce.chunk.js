(this["webpackJsonpspotify-wrapped"]=this["webpackJsonpspotify-wrapped"]||[]).push([[0],{145:function(e,t,a){},146:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a.n(s),i=a(14),r=a.n(i),n=(a(63),a(5)),l=(a(64),a(65),a(51)),o=a.n(l),j=a(52),d=a.n(j),b=a(6),u=(a(84),a(1)),m=function(e){var t={};return e.isSelected&&(t.backgroundColor="#306b30"),Object(u.jsx)("div",{onClick:e.onClick,style:t,className:"button",children:Object(u.jsxs)("span",{children:["top ",e.category]})})},O=(a(86),function(e){var t={};return e.isSelected&&(t.backgroundColor="rgba(89, 89, 89, 1)"),Object(u.jsx)("div",{onClick:e.onClick,className:"term-button",style:t,children:Object(u.jsx)("span",{name:"term",children:e.termdesc})})}),p=(a(87),a(58)),h=function(e){var t={};return e.isVisible?t.display="block":t.display="none",Object(u.jsx)("div",{style:t,children:Object(u.jsx)("div",{className:"save-button",id:e.id,onClick:e.onClick,visible:e.isVisible,children:Object(u.jsxs)("span",{children:[Object(u.jsx)(p.a,{})," download collage"]})})})},x=(a(88),function(e){return Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"show-all-button",onClick:e.onClick,visible:e.isVisible,children:Object(u.jsx)("span",{children:e.show})})})}),v=a(19),f=a.n(v),g=(a(90),function(e){var t={background:"url(".concat(e.backgroundUrl,")")},a={};return e.isCardVisible?t.display="block":t.display="none",e.areCardsVisible?a.display="block":a.display="none",Object(u.jsx)("div",{style:a,children:Object(u.jsx)("a",{className:"card-link",href:e.link,target:"_blank",rel:"noreferrer",children:Object(u.jsxs)("div",{className:"card-ranking",style:t,children:[Object(u.jsx)("span",{children:e.text}),Object(u.jsx)("div",{className:"card-subtext",children:Object(u.jsx)("span",{children:e.subtext})})]})})})}),k=(a(91),function(e){var t={};return e.isVisible?t.display="block":t.display="none",Object(u.jsx)("div",{style:t,children:Object(u.jsxs)("div",{className:"popularity-content",children:[Object(u.jsxs)("div",{className:"popularity-element",children:[Object(u.jsx)("div",{className:"popularity-emoji",children:e.popularityEmoji}),Object(u.jsxs)("div",{className:"average-popularity",children:[e.averagePopularity,"/10"]}),Object(u.jsx)("div",{className:"description",children:"popularity"})]}),Object(u.jsxs)("div",{className:"popularity-element",children:[Object(u.jsxs)("div",{children:[" ",e.leastMainstreamEmoji," "]}),Object(u.jsx)("a",{className:"popularity-link",href:e.link,target:"_blank",rel:"noreferrer",children:Object(u.jsx)("div",{className:"name",children:e.name})}),Object(u.jsx)("div",{className:"description",children:"least mainstream"})]})]})})}),y=(a(92),a(93),a(20)),_=Object(y.a)((function(){return Object(u.jsx)(u.Fragment,{children:["\u270c\ud83d\ude17","\ud83d\ude24\ud83d\udde3\ud83d\udcaf","\ud83d\udc41\ufe0f\ud83d\udc44\ud83d\udc41\ufe0f","\ud83e\udd94\ud83d\udc3e","\ud83e\udd18\ud83d\ude0e"][Math.round(4*Math.random())]})})),N=function(e){return Object(u.jsx)("div",{className:"headline",children:Object(u.jsxs)("h1",{children:[Object(u.jsx)("span",{className:"username",children:e.username})," Mini Wrap ",Object(u.jsx)(_,{})]})})},S=(a(95),function(e){return Object(u.jsxs)("div",{className:"audio-feature",children:[Object(u.jsx)("div",{className:"audio-feature-emoji",children:e.emoji}),Object(u.jsxs)("div",{children:[e.score,e.scale]}),Object(u.jsx)("div",{className:"audio-feature-category",children:e.category})]})}),w=a(55),C=a.n(w),V=(a(145),a(146),function(){var e=new Date,t=String(e.getDate()).padStart(2,"0");return String(e.getMonth()+1).padStart(2,"0")+"/"+t+"/"+e.getFullYear()}),M=Object(y.a)((function(e){return Object(u.jsx)("span",{className:"date-textfield",children:V()})})),E=function(e){var t={};return e.isVisible?t.display="block":t.display="none",Object(u.jsxs)("div",{className:"gallery",id:e.id,style:t,children:[Object(u.jsxs)("div",{className:"collage-headline",children:["my top ",e.category," ",e.term]}),Object(u.jsx)(C.a,{images:e.images,enableLightbox:!1,enableImageSelection:!1,onClickThumbnail:function(t){window.open(e.images[t].url,"_blank")}}),Object(u.jsxs)("div",{className:"collage-subtext",children:[Object(u.jsx)("span",{className:"website-name",children:"https://wrapped.mudi.me/"}),Object(u.jsx)(M,{})]})]})},F=Object(b.g)((function(){var e=Object(s.useState)([]),t=Object(n.a)(e,2),a=t[0],i=t[1],r=Object(s.useState)(""),l=Object(n.a)(r,2),j=l[0],p=l[1],v=Object(s.useState)(""),y=Object(n.a)(v,2),_=y[0],w=y[1],C=Object(s.useState)(""),V=Object(n.a)(C,2),M=V[0],F=V[1],U=Object(s.useState)(""),L=Object(n.a)(U,2),P=L[0],A=L[1],T=Object(s.useState)(""),z=Object(n.a)(T,2),D=z[0],I=z[1],R=Object(s.useState)(""),B=Object(n.a)(R,2),J=B[0],W=B[1],q=Object(s.useState)("top tracks"),X=Object(n.a)(q,2),Y=X[0],G=X[1],H=Object(s.useState)("medium_term"),K=Object(n.a)(H,2),Q=K[0],Z=K[1],$=Object(s.useState)("medium_term"),ee=Object(n.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)("this year"),ce=Object(n.a)(se,2),ie=ce[0],re=ce[1],ne=Object(s.useState)(!1),le=Object(n.a)(ne,2),oe=le[0],je=le[1],de=Object(s.useState)(!1),be=Object(n.a)(de,2),ue=be[0],me=be[1],Oe=Object(s.useState)("show all"),pe=Object(n.a)(Oe,2),he=pe[0],xe=pe[1],ve=Object(s.useState)(!0),fe=Object(n.a)(ve,2),ge=fe[0],ke=fe[1],ye=Object(s.useState)([]),_e=Object(n.a)(ye,2),Ne=_e[0],Se=_e[1],we=Object(s.useState)([]),Ce=Object(n.a)(we,2),Ve=Ce[0],Me=Ce[1],Ee=Object(s.useState)(["my"]),Fe=Object(n.a)(Ee,2),Ue=Fe[0],Le=Fe[1],Pe=Object(s.useState)([]),Ae=Object(n.a)(Pe,2),Te=Ae[0],ze=Ae[1],De=Object(s.useState)([]),Ie=Object(n.a)(De,2),Re=Ie[0],Be=Ie[1],Je=Object(s.useState)([]),We=Object(n.a)(Je,2),qe=We[0],Xe=We[1],Ye=Object(s.useState)([]),Ge=Object(n.a)(Ye,2),He=Ge[0],Ke=Ge[1],Qe=Object(b.f)();Object(s.useEffect)((function(){var e;e="https://api.wrapped.mudi.me",ke(!0);var t=new URLSearchParams(window.location.search).get("access_token");o.a.get("".concat(e,"/api/top/?term=").concat(te,"&spotify_token=").concat(t)).then((function(e){var t=e.data.audio_features,a=e.data.tracks_popularity,s=e.data.artists_popularity;Le("".concat(e.data.user_data,"'s")),Se(e.data.artists_data),Me(e.data.tracks_data),Xe(e.data.tracks_collage),Ke(e.data.artists_collage),ke(!1),i(t),ze(a),Be(s),Ze(t,a,s),function(){switch(Q){case"short_term":re("this month");break;case"long_term":re("of all time");break;default:re("this year")}}()})).catch((function(e){console.log(e),400===e.response.status&&Qe.push("/")}))}),[Qe,te,Q]);var Ze=function(e,t,a){for(var s=e.danceability,c=e.energy,i=e.tempo,r=e.happiness,n=t.average_popularity,l=a.average_popularity,o=[[[0,1.7],"\ud83e\uddcd\ud83e\uddcd\ud83e\uddcd","\ud83d\udca4\ud83d\udca4\ud83d\udca4","\ud83d\ude2b\ud83d\ude2b\ud83d\ude2b","\ud83d\udc64\ud83d\udc64\ud83d\udc64"],[[1.7,3.3],"\ud83e\uddcd\ud83e\uddcd","\ud83d\udca4\ud83d\udca4","\ud83d\ude2b\ud83d\ude2b","\ud83d\udc64\ud83d\udc64"],[[3.3,5],"\ud83e\uddcd","\ud83d\udca4","\ud83d\ude2b","\ud83d\udc64"],[[5,6.7],"\ud83d\udc83","\u26a1","\ud83d\ude06","\ud83d\udd25"],[[6.7,8.4],"\ud83d\udc83\ud83d\udc83","\u26a1\u26a1","\ud83d\ude06\ud83d\ude06","\ud83d\udd25\ud83d\udd25"],[[8.4,10],"\ud83d\udc83\ud83d\udc83\ud83d\udc83","\u26a1\u26a1\u26a1","\ud83d\ude06\ud83d\ude06\ud83d\ude06","\ud83d\udd25\ud83d\udd25\ud83d\udd25"]],j=[[[0,40],"\ud83d\udc0c\ud83d\udc0c\ud83d\udc0c"],[[40,66],"\ud83d\udc0c\ud83d\udc0c"],[[66,76],"\ud83d\udc0c"],[[76,120],"\ud83d\ude80"],[[120,168],"\ud83d\ude80\ud83d\ude80"],[[168,Number.MAX_VALUE],"\ud83d\ude80\ud83d\ude80\ud83d\ude80"]],d=0;d<6;d++){var b=o[d][0],u=b[0],m=b[1];s>=u&&s<=m&&w(o[d][1]),c>=u&&c<=m&&p(o[d][2]),r>=u&&r<=m&&A(o[d][3]),n>=u&&n<=m&&I(o[d][4]),l>=u&&l<=m&&W(o[d][4])}for(var O=0;O<6;O++){var h=j[O][0],x=h[0],v=h[1];i>=x&&i<=v&&F(j[O][1])}},$e=function(){var e;"top tracks"===Y&&(e="#tracks_img"),"top artists"===Y&&(e="#artists_img"),window.scrollTo(0,0),d()(document.querySelector(e),{useCORS:!0,allowTaint:!0}).then((function(e){var t=document.createElement("a");t.download="artists_collage.png",t.href=e.toDataURL(),document.body.appendChild(t),t.click(),document.body.removeChild(t),t=null}))},et=function(){je(!1),me(!1),xe("show all")},tt=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"audio-feature-texfield",children:[Object(u.jsx)(S,{emoji:_,category:"danceability",score:a.danceability,scale:"/10"}),Object(u.jsx)(S,{emoji:j,category:"energy",score:a.energy,scale:"/10"}),Object(u.jsx)(S,{emoji:M,category:"tempo",score:a.tempo,scale:" bpm"}),Object(u.jsx)(S,{emoji:P,category:"happiness",score:a.happiness,scale:"/10"})]}),Object(u.jsxs)("div",{className:"top-buttons",children:[Object(u.jsx)(m,{onClick:function(){G("top tracks"),je(!1),et()},category:"tracks",isSelected:"top tracks"===Y}),Object(u.jsx)(m,{onClick:function(){G("top artists"),je(!1),et()},category:"artists",isSelected:"top artists"===Y})]}),Object(u.jsxs)("div",{className:"popularity-textfield",children:[Object(u.jsx)(k,{popularityEmoji:J,leastMainstreamEmoji:"\ud83c\udfa7",averagePopularity:Re.average_popularity,name:Re.least_mainstream_artist_name,link:Re.least_mainstream_artist_url,isVisible:"top artists"===Y}),Object(u.jsx)(k,{popularityEmoji:D,leastMainstreamEmoji:"\ud83c\udfa7",averagePopularity:Te.average_popularity,name:Te.least_mainstream_track_name,link:Te.least_mainstream_track_url,isVisible:"top tracks"===Y})]}),Object(u.jsxs)("div",{className:"collage",children:[Object(u.jsx)("div",{style:{overflow:"scroll"},children:Object(u.jsx)(E,{id:"tracks_img",category:"tracks",term:ie,images:qe,isVisible:"top tracks"===Y})}),Object(u.jsx)("div",{style:{overflow:"scroll"},children:Object(u.jsx)(E,{id:"artists_img",category:"artists",term:ie,images:He,isVisible:"top artists"===Y})})]}),Object(u.jsxs)("div",{className:"save-and-share",children:[Object(u.jsx)(h,{onClick:$e,isVisible:"top tracks"===Y}),Object(u.jsx)(h,{onClick:$e,isVisible:"top artists"===Y})]}),Object(u.jsxs)("div",{className:"all-cards",children:[c.a.Children.toArray(Ve.map((function(e){return Object(u.jsx)(g,{areCardsVisible:oe,backgroundUrl:e.track_background,link:e.track_url,text:"".concat(e.track_rank," ").concat(e.track_name),subtext:e.track_artists,isCardVisible:"top tracks"===Y})}))),c.a.Children.toArray(Ne.map((function(e){return Object(u.jsx)(g,{areCardsVisible:oe,backgroundUrl:e.artist_background,link:e.artist_url,text:"".concat(e.artist_rank," ").concat(e.artist_name),subtext:e.artist_followers,isCardVisible:"top artists"===Y})})))]}),Object(u.jsx)(x,{onClick:function(){je(!oe),me(!ue),!0===ue&&xe("show all"),!1===ue&&xe("hide all")},show:he+" "+Y})]});return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(f.a,{href:"https://github.com/mudassarzahid/miniwrap"}),Object(u.jsx)("div",{id:"wrapper",children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsxs)("div",{className:"built-by",children:["built by ",Object(u.jsx)("a",{href:"https://twitter.com/mudassar_z",target:"_blank",rel:"noreferrer",children:"Mudi"})]}),Object(u.jsx)(N,{username:Ue}),Object(u.jsxs)("div",{className:"term-buttons",children:[Object(u.jsx)(O,{onClick:function(){Z("short_term"),ae("short_term"),je(!1),et()},value:"short_term",termdesc:"4 weeks",isSelected:"short_term"===Q}),Object(u.jsx)(O,{onClick:function(){Z("medium_term"),ae("medium_term"),je(!1),et()},value:"medium_term",termdesc:"6 months",isSelected:"medium_term"===Q}),Object(u.jsx)(O,{onClick:function(){Z("long_term"),ae("long_term"),je(!1),et()},value:"long_term",termdesc:"all time",isSelected:"long_term"===Q})]}),ge&&Object(u.jsxs)("div",{className:"spinner",children:[Object(u.jsx)("div",{className:"rect1"}),Object(u.jsx)("div",{className:"rect2"}),Object(u.jsx)("div",{className:"rect3"}),Object(u.jsx)("div",{className:"rect4"}),Object(u.jsx)("div",{className:"rect5"})]}),!ge&&tt]})})]})})),U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,151)).then((function(t){var a=t.getCLS,s=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),s(e),c(e),i(e),r(e)}))},L=a(18),P=(a(149),a(57)),A=a.n(P),T=function(e){return console.error(e)},z=function(e){var t,a=Object(b.f)();return t="https://wrapped.mudi.me",Object(u.jsxs)("div",{children:[Object(u.jsx)(f.a,{href:"https://github.com/mudassarzahid/miniwrap"}),Object(u.jsx)("div",{className:"login-headline",children:"Mini Wrap for Spotify"}),Object(u.jsx)("div",{className:"login-sub-headline",children:"\u2728 generate your own collage \u2728"}),Object(u.jsx)("div",{className:"login-button",children:Object(u.jsx)(A.a,{clientId:"0ab0f042b3e44b3086e978dacb7cee47",redirectUri:"".concat(t,"/app"),scope:"user-top-read user-read-private user-read-email",onSuccess:function(e){console.log(e);var t=e.access_token;console.log(e),a.push("/app?access_token=".concat(t))},onFailure:T})}),Object(u.jsxs)("div",{className:"built-by",children:["built by ",Object(u.jsx)("a",{href:"https://twitter.com/mudassar_z",target:"_blank",rel:"noreferrer",children:"Mudi"})]})]})};r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(L.a,{children:Object(u.jsxs)(b.c,{children:[Object(u.jsx)(b.a,{exact:!0,path:"/",children:Object(u.jsx)(z,{})}),Object(u.jsx)(b.a,{path:"/app",children:Object(u.jsx)(F,{})})]})})}),document.getElementById("root")),U()},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},95:function(e,t,a){}},[[150,1,2]]]);
//# sourceMappingURL=main.da54d9ce.chunk.js.map